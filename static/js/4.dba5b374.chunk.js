(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{203:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){},241:function(e,t,a){"use strict";a.r(t);var n=a(151),r=a(17),o=a(0),c=a.n(o),i=a(237),s=a(244),l=a(234),d=a(236),u=a(29),m=a(28),g=a(140),b=a.n(g),p=a(239),f=a(162);var v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(p.a)(e,b()({defaultTheme:f.a},t))},O=a(238),y=a(233),h=a(141),j=a.n(h),I=(a(9),a(142)),E=a(143),N=a(242),T=a(145),w=a(161),C=a(27),k=a.n(C),S=(a(144),"undefined"===typeof window?c.a.useEffect:c.a.useLayoutEffect),x=c.a.forwardRef(function(e,t){var a=e.alignItems,n=void 0===a?"center":a,r=e.autoFocus,o=e.button,i=void 0!==o&&o,s=e.children,l=e.classes,d=e.className,u=e.component,m=e.ContainerComponent,g=void 0===m?"li":m,p=e.ContainerProps,f=(p=void 0===p?{}:p).className,v=j()(p,["className"]),O=e.dense,y=e.disabled,h=void 0!==y&&y,E=e.disableGutters,C=void 0!==E&&E,x=e.divider,L=void 0!==x&&x,q=e.focusVisibleClassName,R=e.selected,J=void 0!==R&&R,P=j()(e,["alignItems","autoFocus","button","children","classes","className","component","ContainerComponent","ContainerProps","dense","disabled","disableGutters","divider","focusVisibleClassName","selected"]),V=c.a.useContext(w.a),A={dense:O||V.dense||!1,alignItems:n},B=c.a.useRef(null);S(function(){r&&B.current&&B.current.focus()},[r]);var X=c.a.Children.toArray(s),F=X.length&&Object(T.a)(X[X.length-1],["ListItemSecondaryAction"]),$=c.a.useCallback(function(e){B.current=k.a.findDOMNode(e)},[]),D=Object(T.c)($,t),M=b()({className:Object(I.a)(l.root,d,A.dense&&l.dense,!C&&l.gutters,L&&l.divider,h&&l.disabled,i&&l.button,"center"!==n&&l.alignItemsFlexStart,F&&l.secondaryAction,J&&l.selected),disabled:h},P),_=u||"li";return i&&(M.component=u||"div",M.focusVisibleClassName=Object(I.a)(l.focusVisible,q),_=N.a),F?(_=M.component||u?_:"div","li"===g&&("li"===_?_="div":"li"===M.component&&(M.component="div")),c.a.createElement(w.a.Provider,{value:A},c.a.createElement(g,b()({className:Object(I.a)(l.container,f),ref:D},v),c.a.createElement(_,M,X),X.pop()))):c.a.createElement(w.a.Provider,{value:A},c.a.createElement(_,b()({ref:D},M),X))}),L=Object(E.a)(function(e){return{root:{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,"&$focusVisible":{backgroundColor:e.palette.action.selected},"&$selected, &$selected:hover":{backgroundColor:e.palette.action.selected},"&$disabled":{opacity:.5}},container:{position:"relative"},focusVisible:{},dense:{paddingTop:4,paddingBottom:4},alignItemsFlexStart:{alignItems:"flex-start"},disabled:{},divider:{borderBottom:"1px solid ".concat(e.palette.divider),backgroundClip:"padding-box"},gutters:{paddingLeft:16,paddingRight:16},button:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},secondaryAction:{paddingRight:48},selected:{}}},{name:"MuiListItem"})(x),q=a(235),R=c.a.forwardRef(function(e,t){var a=e.children,n=e.classes,r=e.className,o=e.disableTypography,i=void 0!==o&&o,s=e.inset,l=void 0!==s&&s,d=e.primary,u=e.primaryTypographyProps,m=e.secondary,g=e.secondaryTypographyProps,p=j()(e,["children","classes","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"]),f=c.a.useContext(w.a).dense,v=null!=d?d:a;null==v||v.type===q.a||i||(v=c.a.createElement(q.a,b()({variant:f?"body2":"body1",className:n.primary,component:"span"},u),v));var O=m;return null==O||O.type===q.a||i||(O=c.a.createElement(q.a,b()({variant:"body2",className:n.secondary,color:"textSecondary"},g),O)),c.a.createElement("div",b()({className:Object(I.a)(n.root,r,f&&n.dense,l&&n.inset,v&&O&&n.multiline),ref:t},p),v,O)}),J=Object(E.a)({root:{flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},multiline:{marginTop:6,marginBottom:6},dense:{},inset:{paddingLeft:56},primary:{},secondary:{}},{name:"MuiListItemText"})(R),P=(a(203),v(function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper,border:"1px solid",borderRadius:"4px"}}})),V=function(){var e=P(),t=Object(o.useState)(""),a=Object(r.a)(t,2),i=a[0],s=a[1],l=Object(o.useState)([]),d=Object(r.a)(l,2),g=d[0],b=d[1],p=Object(o.useContext)(m.c),f=Object(r.a)(p,2),v=f[0],h=f[1],j=Object(o.useContext)(m.b),I=Object(r.a)(j,2)[1],E=function(e){h(Object(n.a)({},v,{showLoader:!0}));var t={userId:localStorage.getItem("TTTuserId"),opponentId:e._id};Object(u.a)("game/sendRequest",JSON.stringify(t)).then(function(a){h(Object(n.a)({},v,{showLoader:!1})),200!==a.status?h(Object(n.a)({},v,{message:"".concat(a.message)})):u.c.on("gameResponse-".concat(t.userId),function(t){!function(e,t){e.accept?I({gameId:e.gameId,opponentId:t,turn:localStorage.getItem("TTTuserId"),type:"X"}):h(Object(n.a)({},v,{message:"Your request was not accepted."}))}(t,e._id)})})},N=g.map(function(e){return c.a.createElement(L,{button:!0,key:e._id,onClick:function(){return E(e)}},c.a.createElement(J,{primary:e.userName}),c.a.createElement("i",{className:"online-status ".concat(e.onlineStatus?"is-online":"is-offline")}))});return c.a.createElement("div",{className:"search"},c.a.createElement(O.a,{label:"Users",placeholder:"Search for opponent",onChange:function(e){return function(e){b([]),s(e);var t={userName:e,id:localStorage.getItem("TTTuserId")};Object(u.a)("user/search",JSON.stringify(t)).then(function(e){if(200!==e.status)throw new Error(e.message);b(e.content.users)}).catch(function(e){console.log(e)})}(e.target.value)},margin:"normal",variant:"outlined"}),g.length>0&&i.length>0&&c.a.createElement(y.a,{className:e.root},N))},A=a(183),B=function(e){return e.map(function(e){return Number(e)})},X=(a(204),function(){var e=Object(o.useState)([[null,null,null],[null,null,null],[null,null,null]]),t=Object(r.a)(e,2),a=t[0],i=t[1],s=Object(o.useContext)(m.b),l=Object(r.a)(s,2),d=l[0],g=l[1],b=Object(o.useContext)(m.c),p=Object(r.a)(b,2),f=p[0],v=p[1];Object(o.useEffect)(function(){var e=localStorage.getItem("TTTuserId");u.c.on("changeTurn-".concat(e),function(t){var r=B(t.squareNumber.split(".")),o="X"===d.type?"O":"X";g(Object(n.a)({},d,{turn:e})),i([].concat(Object(A.a)(a),[a[r[0]][r[1]]=o]))}),u.c.on("finish-".concat(e),function(e){var t=B(e.squareNumber.split(".")),r="X"===d.type?"O":"X";if(i([].concat(Object(A.a)(a),[a[t[0]][t[1]]=r])),e.draw)v(Object(n.a)({},f,{message:"No winner"}));else{var o=e.winner;v(Object(n.a)({},f,{message:"".concat(o," won")}))}g(null)})},[]);var O=function(e){var t=d.type,r=B(e.split("."));if(a[r[0]][r[1]])v(Object(n.a)({},f,{message:"Select an empty square"}));else if(d.turn===localStorage.getItem("TTTuserId"))if(i([].concat(Object(A.a)(a),[a[r[0]][r[1]]=t])),function(e){var t=e[0],n=e[1],r=a[t][n],o=!1;switch(e.join(".")){case"0.0":o=r===a[0][1]&&r===a[0][2]||r===a[1][0]&&r===a[2][0]||r===a[1][1]&&r===a[2][2];break;case"0.1":o=r===a[0][0]&&r===a[0][2]||r===a[1][1]&&r===a[2][1];break;case"0.2":o=r===a[0][1]&&r===a[0][0]||r===a[1][2]&&r===a[2][2]||r===a[1][1]&&r===a[2][0];break;case"1.0":o=r===a[0][0]&&r===a[2][0]||r===a[1][1]&&r===a[1][2];break;case"1.1":o=r===a[1][0]&&r===a[1][2]||r===a[0][1]&&r===a[2][1]||r===a[0][2]&&r===a[2][0]||r===a[0][0]&&r===a[2][2];break;case"1.2":o=r===a[0][2]&&r===a[2][2]||r===a[1][1]&&r===a[1][0];break;case"2.0":o=r===a[2][1]&&r===a[2][2]||r===a[1][0]&&r===a[0][0]||r===a[1][1]&&r===a[0][2];break;case"2.1":o=r===a[2][0]&&r===a[2][2]||r===a[1][1]&&r===a[0][1];break;case"2.2":o=r===a[2][1]&&r===a[2][0]||r===a[1][2]&&r===a[0][2]||r===a[1][1]&&r===a[0][0]}return o}(r)){v(Object(n.a)({},f,{showLoader:!0}));var o={gameId:d.gameId,playerId:localStorage.getItem("TTTuserId"),squareNumber:e,draw:!1};Object(u.a)("game/finish",JSON.stringify(o)).then(function(){v({showLoader:!1,message:"You won"}),g(null)})}else if(function(){for(var e=!0,t=0;t<a.length&&e;t+=1)for(var n=0;n<a[t].length;n+=1)if(null===a[t][n]){e=!1;break}return e}()){v(Object(n.a)({},f,{showLoader:!0}));var c={gameId:d.gameId,playerId:localStorage.getItem("TTTuserId"),squareNumber:e,draw:!0};Object(u.a)("game/finish",JSON.stringify(c)).then(function(){v({showLoader:!1,message:"No winner"}),g(null)})}else{v(Object(n.a)({},f,{showLoader:!0}));var s={gameId:d.gameId,playerId:localStorage.getItem("TTTuserId"),squareNumber:e};Object(u.a)("game/changeTurn",JSON.stringify(s)).then(function(){v(Object(n.a)({},f,{showLoader:!1})),g(Object(n.a)({},d,{turn:d.opponentId}))})}else v(Object(n.a)({},f,{message:"Not your turn"}))};return c.a.createElement("div",{className:"game"},c.a.createElement("div",{className:"grid-container"},c.a.createElement("div",{id:"grid-item",onClick:function(){O("0.0")}},a[0][0]),c.a.createElement("div",{id:"grid-item",onClick:function(){O("0.1")}},a[0][1]),c.a.createElement("div",{id:"grid-item",onClick:function(){O("0.2")}},a[0][2]),c.a.createElement("div",{id:"grid-item",onClick:function(){O("1.0")}},a[1][0]),c.a.createElement("div",{id:"grid-item",onClick:function(){O("1.1")}},a[1][1]),c.a.createElement("div",{id:"grid-item",onClick:function(){O("1.2")}},a[1][2]),c.a.createElement("div",{id:"grid-item",onClick:function(){O("2.0")}},a[2][0]),c.a.createElement("div",{id:"grid-item",onClick:function(){O("2.1")}},a[2][1]),c.a.createElement("div",{id:"grid-item",onClick:function(){O("2.2")}},a[2][2])))}),F=a(33);a(205),t.default=function(){var e=Object(o.useState)({player:"",answer:null}),t=Object(r.a)(e,2),a=t[0],g=t[1],b=Object(o.useContext)(m.c),p=Object(r.a)(b,2),f=p[0],v=p[1],O=Object(o.useContext)(m.b),y=Object(r.a)(O,2),h=y[0],j=y[1],I=function(e){v(Object(n.a)({},f,{showLoader:!0})),g(Object(n.a)({},a,{player:""}));var t={playerId:localStorage.getItem("TTTuserId"),opponentUserName:a.player,answer:e};Object(u.a)("game/respondRequest",JSON.stringify(t)).then(function(e){v(Object(n.a)({},f,{showLoader:!1})),200===e.status&&j({gameId:e.content.gameId,opponentId:e.content.opponentId,turn:e.content.opponentId,type:"O"})}).catch(function(){v({showLoader:!1,message:"Something went wrong."})})};Object(o.useEffect)(function(){var e=localStorage.getItem("TTTuserId");Object(u.b)("user/changeStatus",JSON.stringify({userId:e,status:!0})),u.c.on("gameRequest-".concat(e),function(e){h||g(Object(n.a)({},a,{player:e.starter}))})},[]);var E=function(){v(Object(n.a)({},f,{message:""}))};return c.a.createElement("div",{className:"main-container"},f.showLoader&&c.a.createElement(F.a,null),c.a.createElement("div",{className:"background"}),c.a.createElement(s.a,{open:f.message.length>0,onClose:E},c.a.createElement(l.a,null,f.message),c.a.createElement(d.a,null,c.a.createElement(i.a,{onClick:E,color:"primary"},"OK"))),c.a.createElement(s.a,{open:a.player.length>0,onClose:function(){return I(!1)}},c.a.createElement(l.a,null,"".concat(a.player," wants to play with you.")),c.a.createElement(d.a,null,c.a.createElement(i.a,{onClick:function(){return I(!0)},color:"primary"},"OK"),c.a.createElement(i.a,{onClick:function(){return I(!1)},color:"secondary"},"No"))),c.a.createElement("div",{className:"main"},!h&&c.a.createElement("div",{className:"search-container"},c.a.createElement(V,null)),c.a.createElement("div",{className:"game-container"},h&&c.a.createElement(X,null))))}}}]);
//# sourceMappingURL=4.dba5b374.chunk.js.map